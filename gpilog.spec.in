# gpilog.spec
#
# RPM Spec File for the GpiLog Project
#
#   (C) Copyright 2004 Fred Gleason <fredg@salemradiolabs.com>
#
#      $Id: gpilog.spec.in,v 1.5 2014/03/27 16:25:21 cvs Exp $
#
#   This program is free software; you can redistribute it and/or modify
#   it under the terms of the GNU General Public License version 2 as
#   published by the Free Software Foundation.
#
#   This program is distributed in the hope that it will be useful,
#   but WITHOUT ANY WARRANTY; without even the implied warranty of
#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#   GNU General Public License for more details.
#
#   You should have received a copy of the GNU General Public
#   License along with this program; if not, write to the Free Software
#   Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
#

Summary: GPILog
Name: gpilog
Version: @VERSION@
Release: @RPM_RELEASE@%{?dist}
License: GPL
Group: Productivity/Multimedia/Other
Source: gpilog-@VERSION@.tar.gz
Requires: gpio
BuildRoot: /var/tmp/gpilog-%PKG_VERSION%

%description
GPILog is a package for recording the precise times of line transitions
on a general purpose input (GPI) device.  It uses very few resources
and can be safely used in conjunction with other programs that monitor
the same GPI device without interference.

%prep
#%setup -n %{name}-@VERSION@
%setup
./configure --prefix=/usr

%build
make

%install
rm -rf $RPM_BUILD_ROOT
make install DESTDIR=$RPM_BUILD_ROOT

%clean
rm -rf $RPM_BUILD_ROOT

%post
if test "@DISTRO@" = "suse" ; then
  PACKAGE_DOC_DIR=%_docdir/%{name}
fi
if test "@DISTRO@" = "redhat" ; then
  PACKAGE_DOC_DIR=%_docdir/%{name}-@VERSION@
fi
if test ! -e /etc/gpilog.conf ; then
  cp $PACKAGE_DOC_DIR/gpilog.conf-sample /etc/gpilog.conf
fi

%files
%defattr(-,root,root)
%{_sbindir}/gpilog
/etc/init.d/gpilog
%doc README
%doc INSTALL
%doc NEWS
%doc AUTHORS
%doc ChangeLog
%doc COPYING
%doc gpilog.conf-sample

%changelog
* @RPM_DATESTAMP@ Fred Gleason <fredg@paravelsystems.com> - @VERSION@-@RPM_RELEASE@
-- Autogenerated from build tree.
